
var _hangul_orig_names = {
    'HANGUL CHOSEONG CEONGCHIEUMCHIEUCH': 4437,
    'HANGUL CHOSEONG CEONGCHIEUMCIEUC': 4432,
    'HANGUL CHOSEONG CEONGCHIEUMSIOS': 4414,
    'HANGUL CHOSEONG CEONGCHIEUMSSANGCIEUC': 4433,
    'HANGUL CHOSEONG CEONGCHIEUMSSANGSIOS': 4415,
    'HANGUL CHOSEONG CHIEUCH': 4366,
    'HANGUL CHOSEONG CHIEUCH-HIEUH': 4435,
    'HANGUL CHOSEONG CHIEUCH-KHIEUKH': 4434,
    'HANGUL CHOSEONG CHITUEUMCHIEUCH': 4436,
    'HANGUL CHOSEONG CHITUEUMCIEUC': 4430,
    'HANGUL CHOSEONG CHITUEUMSIOS': 4412,
    'HANGUL CHOSEONG CHITUEUMSSANGCIEUC': 4431,
    'HANGUL CHOSEONG CHITUEUMSSANGSIOS': 4413,
    'HANGUL CHOSEONG CIEUC': 4364,
    'HANGUL CHOSEONG CIEUC-IEUNG': 4429,
    'HANGUL CHOSEONG FILLER': 4447,
    'HANGUL CHOSEONG HIEUH': 4370,
    'HANGUL CHOSEONG IEUNG': 4363,
    'HANGUL CHOSEONG IEUNG-CHIEUCH': 4425,
    'HANGUL CHOSEONG IEUNG-CIEUC': 4424,
    'HANGUL CHOSEONG IEUNG-KIYEOK': 4417,
    'HANGUL CHOSEONG IEUNG-MIEUM': 4419,
    'HANGUL CHOSEONG IEUNG-PANSIOS': 4422,
    'HANGUL CHOSEONG IEUNG-PHIEUPH': 4427,
    'HANGUL CHOSEONG IEUNG-PIEUP': 4420,
    'HANGUL CHOSEONG IEUNG-SIOS': 4421,
    'HANGUL CHOSEONG IEUNG-THIEUTH': 4426,
    'HANGUL CHOSEONG IEUNG-TIKEUT': 4418,
    'HANGUL CHOSEONG KAPYEOUNMIEUM': 4381,
    'HANGUL CHOSEONG KAPYEOUNPHIEUPH': 4439,
    'HANGUL CHOSEONG KAPYEOUNPIEUP': 4395,
    'HANGUL CHOSEONG KAPYEOUNRIEUL': 4379,
    'HANGUL CHOSEONG KAPYEOUNSSANGPIEUP': 4396,
    'HANGUL CHOSEONG KHIEUKH': 4367,
    'HANGUL CHOSEONG KIYEOK': 4352,
    'HANGUL CHOSEONG MIEUM': 4358,
    'HANGUL CHOSEONG MIEUM-PIEUP': 4380,
    'HANGUL CHOSEONG NIEUN': 4354,
    'HANGUL CHOSEONG NIEUN-KIYEOK': 4371,
    'HANGUL CHOSEONG NIEUN-PIEUP': 4374,
    'HANGUL CHOSEONG NIEUN-TIKEUT': 4373,
    'HANGUL CHOSEONG PANSIOS': 4416,
    'HANGUL CHOSEONG PHIEUPH': 4369,
    'HANGUL CHOSEONG PHIEUPH-PIEUP': 4438,
    'HANGUL CHOSEONG PIEUP': 4359,
    'HANGUL CHOSEONG PIEUP-CHIEUCH': 4392,
    'HANGUL CHOSEONG PIEUP-CIEUC': 4391,
    'HANGUL CHOSEONG PIEUP-KIYEOK': 4382,
    'HANGUL CHOSEONG PIEUP-NIEUN': 4383,
    'HANGUL CHOSEONG PIEUP-PHIEUPH': 4394,
    'HANGUL CHOSEONG PIEUP-SIOS': 4385,
    'HANGUL CHOSEONG PIEUP-SIOS-CIEUC': 4390,
    'HANGUL CHOSEONG PIEUP-SIOS-KIYEOK': 4386,
    'HANGUL CHOSEONG PIEUP-SIOS-PIEUP': 4388,
    'HANGUL CHOSEONG PIEUP-SIOS-TIKEUT': 4387,
    'HANGUL CHOSEONG PIEUP-SSANGSIOS': 4389,
    'HANGUL CHOSEONG PIEUP-THIEUTH': 4393,
    'HANGUL CHOSEONG PIEUP-TIKEUT': 4384,
    'HANGUL CHOSEONG RIEUL': 4357,
    'HANGUL CHOSEONG RIEUL-HIEUH': 4378,
    'HANGUL CHOSEONG RIEUL-NIEUN': 4376,
    'HANGUL CHOSEONG SIOS': 4361,
    'HANGUL CHOSEONG SIOS-CHIEUCH': 4407,
    'HANGUL CHOSEONG SIOS-CIEUC': 4406,
    'HANGUL CHOSEONG SIOS-HIEUH': 4411,
    'HANGUL CHOSEONG SIOS-IEUNG': 4405,
    'HANGUL CHOSEONG SIOS-KHIEUKH': 4408,
    'HANGUL CHOSEONG SIOS-KIYEOK': 4397,
    'HANGUL CHOSEONG SIOS-MIEUM': 4401,
    'HANGUL CHOSEONG SIOS-NIEUN': 4398,
    'HANGUL CHOSEONG SIOS-PHIEUPH': 4410,
    'HANGUL CHOSEONG SIOS-PIEUP': 4402,
    'HANGUL CHOSEONG SIOS-PIEUP-KIYEOK': 4403,
    'HANGUL CHOSEONG SIOS-RIEUL': 4400,
    'HANGUL CHOSEONG SIOS-SSANGSIOS': 4404,
    'HANGUL CHOSEONG SIOS-THIEUTH': 4409,
    'HANGUL CHOSEONG SIOS-TIKEUT': 4399,
    'HANGUL CHOSEONG SSANGCIEUC': 4365,
    'HANGUL CHOSEONG SSANGHIEUH': 4440,
    'HANGUL CHOSEONG SSANGIEUNG': 4423,
    'HANGUL CHOSEONG SSANGKIYEOK': 4353,
    'HANGUL CHOSEONG SSANGNIEUN': 4372,
    'HANGUL CHOSEONG SSANGPIEUP': 4360,
    'HANGUL CHOSEONG SSANGRIEUL': 4377,
    'HANGUL CHOSEONG SSANGSIOS': 4362,
    'HANGUL CHOSEONG SSANGTIKEUT': 4356,
    'HANGUL CHOSEONG THIEUTH': 4368,
    'HANGUL CHOSEONG TIKEUT': 4355,
    'HANGUL CHOSEONG TIKEUT-KIYEOK': 4375,
    'HANGUL CHOSEONG YEORINHIEUH': 4441,
    'HANGUL CHOSEONG YESIEUNG': 4428,
    'HANGUL DOUBLE DOT TONE MARK': 12335,
    'HANGUL FILLER': 12644,
    'HANGUL JONGSEONG CHIEUCH': 4542,
    'HANGUL JONGSEONG CIEUC': 4541,
    'HANGUL JONGSEONG HIEUH': 4546,
    'HANGUL JONGSEONG HIEUH-MIEUM': 4599,
    'HANGUL JONGSEONG HIEUH-NIEUN': 4597,
    'HANGUL JONGSEONG HIEUH-PIEUP': 4600,
    'HANGUL JONGSEONG HIEUH-RIEUL': 4598,
    'HANGUL JONGSEONG IEUNG': 4540,
    'HANGUL JONGSEONG IEUNG-KHIEUKH': 4591,
    'HANGUL JONGSEONG IEUNG-KIYEOK': 4588,
    'HANGUL JONGSEONG IEUNG-SSANGKIYEOK': 4589,
    'HANGUL JONGSEONG KAPYEOUNMIEUM': 4578,
    'HANGUL JONGSEONG KAPYEOUNPHIEUPH': 4596,
    'HANGUL JONGSEONG KAPYEOUNPIEUP': 4582,
    'HANGUL JONGSEONG KHIEUKH': 4543,
    'HANGUL JONGSEONG KIYEOK': 4520,
    'HANGUL JONGSEONG KIYEOK-RIEUL': 4547,
    'HANGUL JONGSEONG KIYEOK-SIOS': 4522,
    'HANGUL JONGSEONG KIYEOK-SIOS-KIYEOK': 4548,
    'HANGUL JONGSEONG MIEUM': 4535,
    'HANGUL JONGSEONG MIEUM-CHIEUCH': 4576,
    'HANGUL JONGSEONG MIEUM-HIEUH': 4577,
    'HANGUL JONGSEONG MIEUM-KIYEOK': 4570,
    'HANGUL JONGSEONG MIEUM-PANSIOS': 4575,
    'HANGUL JONGSEONG MIEUM-PIEUP': 4572,
    'HANGUL JONGSEONG MIEUM-RIEUL': 4571,
    'HANGUL JONGSEONG MIEUM-SIOS': 4573,
    'HANGUL JONGSEONG MIEUM-SSANGSIOS': 4574,
    'HANGUL JONGSEONG NIEUN': 4523,
    'HANGUL JONGSEONG NIEUN-CIEUC': 4524,
    'HANGUL JONGSEONG NIEUN-HIEUH': 4525,
    'HANGUL JONGSEONG NIEUN-KIYEOK': 4549,
    'HANGUL JONGSEONG NIEUN-PANSIOS': 4552,
    'HANGUL JONGSEONG NIEUN-SIOS': 4551,
    'HANGUL JONGSEONG NIEUN-THIEUTH': 4553,
    'HANGUL JONGSEONG NIEUN-TIKEUT': 4550,
    'HANGUL JONGSEONG PANSIOS': 4587,
    'HANGUL JONGSEONG PHIEUPH': 4545,
    'HANGUL JONGSEONG PHIEUPH-PIEUP': 4595,
    'HANGUL JONGSEONG PIEUP': 4536,
    'HANGUL JONGSEONG PIEUP-HIEUH': 4581,
    'HANGUL JONGSEONG PIEUP-PHIEUPH': 4580,
    'HANGUL JONGSEONG PIEUP-RIEUL': 4579,
    'HANGUL JONGSEONG PIEUP-SIOS': 4537,
    'HANGUL JONGSEONG RIEUL': 4527,
    'HANGUL JONGSEONG RIEUL-HIEUH': 4534,
    'HANGUL JONGSEONG RIEUL-KAPYEOUNPIEUP': 4565,
    'HANGUL JONGSEONG RIEUL-KHIEUKH': 4568,
    'HANGUL JONGSEONG RIEUL-KIYEOK': 4528,
    'HANGUL JONGSEONG RIEUL-KIYEOK-SIOS': 4556,
    'HANGUL JONGSEONG RIEUL-MIEUM': 4529,
    'HANGUL JONGSEONG RIEUL-MIEUM-KIYEOK': 4561,
    'HANGUL JONGSEONG RIEUL-MIEUM-SIOS': 4562,
    'HANGUL JONGSEONG RIEUL-NIEUN': 4557,
    'HANGUL JONGSEONG RIEUL-PANSIOS': 4567,
    'HANGUL JONGSEONG RIEUL-PHIEUPH': 4533,
    'HANGUL JONGSEONG RIEUL-PIEUP': 4530,
    'HANGUL JONGSEONG RIEUL-PIEUP-HIEUH': 4564,
    'HANGUL JONGSEONG RIEUL-PIEUP-SIOS': 4563,
    'HANGUL JONGSEONG RIEUL-SIOS': 4531,
    'HANGUL JONGSEONG RIEUL-SSANGSIOS': 4566,
    'HANGUL JONGSEONG RIEUL-THIEUTH': 4532,
    'HANGUL JONGSEONG RIEUL-TIKEUT': 4558,
    'HANGUL JONGSEONG RIEUL-TIKEUT-HIEUH': 4559,
    'HANGUL JONGSEONG RIEUL-YEORINHIEUH': 4569,
    'HANGUL JONGSEONG SIOS': 4538,
    'HANGUL JONGSEONG SIOS-KIYEOK': 4583,
    'HANGUL JONGSEONG SIOS-PIEUP': 4586,
    'HANGUL JONGSEONG SIOS-RIEUL': 4585,
    'HANGUL JONGSEONG SIOS-TIKEUT': 4584,
    'HANGUL JONGSEONG SSANGIEUNG': 4590,
    'HANGUL JONGSEONG SSANGKIYEOK': 4521,
    'HANGUL JONGSEONG SSANGRIEUL': 4560,
    'HANGUL JONGSEONG SSANGSIOS': 4539,
    'HANGUL JONGSEONG THIEUTH': 4544,
    'HANGUL JONGSEONG TIKEUT': 4526,
    'HANGUL JONGSEONG TIKEUT-KIYEOK': 4554,
    'HANGUL JONGSEONG TIKEUT-RIEUL': 4555,
    'HANGUL JONGSEONG YEORINHIEUH': 4601,
    'HANGUL JONGSEONG YESIEUNG': 4592,
    'HANGUL JONGSEONG YESIEUNG-PANSIOS': 4594,
    'HANGUL JONGSEONG YESIEUNG-SIOS': 4593,
    'HANGUL JUNGSEONG A': 4449,
    'HANGUL JUNGSEONG A-O': 4470,
    'HANGUL JUNGSEONG A-U': 4471,
    'HANGUL JUNGSEONG AE': 4450,
    'HANGUL JUNGSEONG ARAEA': 4510,
    'HANGUL JUNGSEONG ARAEA-EO': 4511,
    'HANGUL JUNGSEONG ARAEA-I': 4513,
    'HANGUL JUNGSEONG ARAEA-U': 4512,
    'HANGUL JUNGSEONG E': 4454,
    'HANGUL JUNGSEONG EO': 4453,
    'HANGUL JUNGSEONG EO-EU': 4476,
    'HANGUL JUNGSEONG EO-O': 4474,
    'HANGUL JUNGSEONG EO-U': 4475,
    'HANGUL JUNGSEONG EU': 4467,
    'HANGUL JUNGSEONG EU-EU': 4502,
    'HANGUL JUNGSEONG EU-U': 4501,
    'HANGUL JUNGSEONG FILLER': 4448,
    'HANGUL JUNGSEONG I': 4469,
    'HANGUL JUNGSEONG I-A': 4504,
    'HANGUL JUNGSEONG I-ARAEA': 4509,
    'HANGUL JUNGSEONG I-EU': 4508,
    'HANGUL JUNGSEONG I-O': 4506,
    'HANGUL JUNGSEONG I-U': 4507,
    'HANGUL JUNGSEONG I-YA': 4505,
    'HANGUL JUNGSEONG O': 4457,
    'HANGUL JUNGSEONG O-E': 4480,
    'HANGUL JUNGSEONG O-EO': 4479,
    'HANGUL JUNGSEONG O-O': 4482,
    'HANGUL JUNGSEONG O-U': 4483,
    'HANGUL JUNGSEONG O-YE': 4481,
    'HANGUL JUNGSEONG OE': 4460,
    'HANGUL JUNGSEONG SSANGARAEA': 4514,
    'HANGUL JUNGSEONG U': 4462,
    'HANGUL JUNGSEONG U-A': 4489,
    'HANGUL JUNGSEONG U-AE': 4490,
    'HANGUL JUNGSEONG U-EO-EU': 4491,
    'HANGUL JUNGSEONG U-U': 4493,
    'HANGUL JUNGSEONG U-YE': 4492,
    'HANGUL JUNGSEONG WA': 4458,
    'HANGUL JUNGSEONG WAE': 4459,
    'HANGUL JUNGSEONG WE': 4464,
    'HANGUL JUNGSEONG WEO': 4463,
    'HANGUL JUNGSEONG WI': 4465,
    'HANGUL JUNGSEONG YA': 4451,
    'HANGUL JUNGSEONG YA-O': 4472,
    'HANGUL JUNGSEONG YA-YO': 4473,
    'HANGUL JUNGSEONG YAE': 4452,
    'HANGUL JUNGSEONG YE': 4456,
    'HANGUL JUNGSEONG YEO': 4455,
    'HANGUL JUNGSEONG YEO-O': 4477,
    'HANGUL JUNGSEONG YEO-U': 4478,
    'HANGUL JUNGSEONG YI': 4468,
    'HANGUL JUNGSEONG YI-U': 4503,
    'HANGUL JUNGSEONG YO': 4461,
    'HANGUL JUNGSEONG YO-I': 4488,
    'HANGUL JUNGSEONG YO-O': 4487,
    'HANGUL JUNGSEONG YO-YA': 4484,
    'HANGUL JUNGSEONG YO-YAE': 4485,
    'HANGUL JUNGSEONG YO-YEO': 4486,
    'HANGUL JUNGSEONG YU': 4466,
    'HANGUL JUNGSEONG YU-A': 4494,
    'HANGUL JUNGSEONG YU-E': 4496,
    'HANGUL JUNGSEONG YU-EO': 4495,
    'HANGUL JUNGSEONG YU-I': 4500,
    'HANGUL JUNGSEONG YU-U': 4499,
    'HANGUL JUNGSEONG YU-YE': 4498,
    'HANGUL JUNGSEONG YU-YEO': 4497,
    'HANGUL LETTER A': 12623,
    'HANGUL LETTER AE': 12624,
    'HANGUL LETTER ARAEA': 12685,
    'HANGUL LETTER ARAEAE': 12686,
    'HANGUL LETTER CHIEUCH': 12618,
    'HANGUL LETTER CIEUC': 12616,
    'HANGUL LETTER E': 12628,
    'HANGUL LETTER EO': 12627,
    'HANGUL LETTER EU': 12641,
    'HANGUL LETTER HIEUH': 12622,
    'HANGUL LETTER I': 12643,
    'HANGUL LETTER IEUNG': 12615,
    'HANGUL LETTER KAPYEOUNMIEUM': 12657,
    'HANGUL LETTER KAPYEOUNPHIEUPH': 12676,
    'HANGUL LETTER KAPYEOUNPIEUP': 12664,
    'HANGUL LETTER KAPYEOUNSSANGPIEUP': 12665,
    'HANGUL LETTER KHIEUKH': 12619,
    'HANGUL LETTER KIYEOK': 12593,
    'HANGUL LETTER KIYEOK-SIOS': 12595,
    'HANGUL LETTER MIEUM': 12609,
    'HANGUL LETTER MIEUM-PANSIOS': 12656,
    'HANGUL LETTER MIEUM-PIEUP': 12654,
    'HANGUL LETTER MIEUM-SIOS': 12655,
    'HANGUL LETTER NIEUN': 12596,
    'HANGUL LETTER NIEUN-CIEUC': 12597,
    'HANGUL LETTER NIEUN-HIEUH': 12598,
    'HANGUL LETTER NIEUN-PANSIOS': 12648,
    'HANGUL LETTER NIEUN-SIOS': 12647,
    'HANGUL LETTER NIEUN-TIKEUT': 12646,
    'HANGUL LETTER O': 12631,
    'HANGUL LETTER OE': 12634,
    'HANGUL LETTER PANSIOS': 12671,
    'HANGUL LETTER PHIEUPH': 12621,
    'HANGUL LETTER PIEUP': 12610,
    'HANGUL LETTER PIEUP-CIEUC': 12662,
    'HANGUL LETTER PIEUP-KIYEOK': 12658,
    'HANGUL LETTER PIEUP-SIOS': 12612,
    'HANGUL LETTER PIEUP-SIOS-KIYEOK': 12660,
    'HANGUL LETTER PIEUP-SIOS-TIKEUT': 12661,
    'HANGUL LETTER PIEUP-THIEUTH': 12663,
    'HANGUL LETTER PIEUP-TIKEUT': 12659,
    'HANGUL LETTER RIEUL': 12601,
    'HANGUL LETTER RIEUL-HIEUH': 12608,
    'HANGUL LETTER RIEUL-KIYEOK': 12602,
    'HANGUL LETTER RIEUL-KIYEOK-SIOS': 12649,
    'HANGUL LETTER RIEUL-MIEUM': 12603,
    'HANGUL LETTER RIEUL-PANSIOS': 12652,
    'HANGUL LETTER RIEUL-PHIEUPH': 12607,
    'HANGUL LETTER RIEUL-PIEUP': 12604,
    'HANGUL LETTER RIEUL-PIEUP-SIOS': 12651,
    'HANGUL LETTER RIEUL-SIOS': 12605,
    'HANGUL LETTER RIEUL-THIEUTH': 12606,
    'HANGUL LETTER RIEUL-TIKEUT': 12650,
    'HANGUL LETTER RIEUL-YEORINHIEUH': 12653,
    'HANGUL LETTER SIOS': 12613,
    'HANGUL LETTER SIOS-CIEUC': 12670,
    'HANGUL LETTER SIOS-KIYEOK': 12666,
    'HANGUL LETTER SIOS-NIEUN': 12667,
    'HANGUL LETTER SIOS-PIEUP': 12669,
    'HANGUL LETTER SIOS-TIKEUT': 12668,
    'HANGUL LETTER SSANGCIEUC': 12617,
    'HANGUL LETTER SSANGHIEUH': 12677,
    'HANGUL LETTER SSANGIEUNG': 12672,
    'HANGUL LETTER SSANGKIYEOK': 12594,
    'HANGUL LETTER SSANGNIEUN': 12645,
    'HANGUL LETTER SSANGPIEUP': 12611,
    'HANGUL LETTER SSANGSIOS': 12614,
    'HANGUL LETTER SSANGTIKEUT': 12600,
    'HANGUL LETTER THIEUTH': 12620,
    'HANGUL LETTER TIKEUT': 12599,
    'HANGUL LETTER U': 12636,
    'HANGUL LETTER WA': 12632,
    'HANGUL LETTER WAE': 12633,
    'HANGUL LETTER WE': 12638,
    'HANGUL LETTER WEO': 12637,
    'HANGUL LETTER WI': 12639,
    'HANGUL LETTER YA': 12625,
    'HANGUL LETTER YAE': 12626,
    'HANGUL LETTER YE': 12630,
    'HANGUL LETTER YEO': 12629,
    'HANGUL LETTER YEORINHIEUH': 12678,
    'HANGUL LETTER YESIEUNG': 12673,
    'HANGUL LETTER YESIEUNG-PANSIOS': 12675,
    'HANGUL LETTER YESIEUNG-SIOS': 12674,
    'HANGUL LETTER YI': 12642,
    'HANGUL LETTER YO': 12635,
    'HANGUL LETTER YO-I': 12681,
    'HANGUL LETTER YO-YA': 12679,
    'HANGUL LETTER YO-YAE': 12680,
    'HANGUL LETTER YU': 12640,
    'HANGUL LETTER YU-I': 12684,
    'HANGUL LETTER YU-YE': 12683,
    'HANGUL LETTER YU-YEO': 12682,
    'HANGUL SINGLE DOT TONE MARK': 12334
};

var ssangChoseong = {
    4364: 4365, // 'HANGUL CHOSEONG CIEUC'  =>  'HANGUL CHOSEONG SSANGCIEUC' 
    4370: 4440, // 'HANGUL CHOSEONG HIEUH'  =>  'HANGUL CHOSEONG SSANGHIEUH' 
    4363: 4423, // 'HANGUL CHOSEONG IEUNG'  =>  'HANGUL CHOSEONG SSANGIEUNG' 
    4352: 4353, // 'HANGUL CHOSEONG KIYEOK' =>  'HANGUL CHOSEONG SSANGKIYEOK'
    4354: 4372, // 'HANGUL CHOSEONG NIEUN'  =>  'HANGUL CHOSEONG SSANGNIEUN' 
    4359: 4360, // 'HANGUL CHOSEONG PIEUP'  =>  'HANGUL CHOSEONG SSANGPIEUP' 
    4357: 4377, // 'HANGUL CHOSEONG RIEUL'  =>  'HANGUL CHOSEONG SSANGRIEUL' 
    4361: 4362, // 'HANGUL CHOSEONG SIOS'   =>  'HANGUL CHOSEONG SSANGSIOS'  
    4355: 4356  // 'HANGUL CHOSEONG TIKEUT' =>  'HANGUL CHOSEONG SSANGTIKEUT'
};
var ssangJongseong = {
    4540 : 4590, // 'HANGUL JONGSEONG IEUNG'  => 'HANGUL JONGSEONG SSANGIEUNG'  
    4520 : 4521, // 'HANGUL JONGSEONG KIYEOK' => 'HANGUL JONGSEONG SSANGKIYEOK' 
    4527 : 4560, // 'HANGUL JONGSEONG RIEUL'  => 'HANGUL JONGSEONG SSANGRIEUL'  
    4538 : 4539  // 'HANGUL JONGSEONG SIOS'   => 'HANGUL JONGSEONG SSANGSIOS'   
};
var doubleJungseongMap = {
    4467: { 4469: 4468 },  // EU +  I = YI
    4457: { 4450: 4459  ,  //  O + AE = WAE
            4449: 4458  ,  //  O +  A = WA
            4469: 4460 },  //  O +  I = OE
    4462: { 4453: 4463  ,  //  U + EO = WEO
            4469: 4465  ,  //  U +  I = WI
            4454: 4464 }   //  U +  E = WE
};

var consonant2choseong = {
    12593: 4352,      // KIYEOK
    12594: 4353,      // SSANGKIYEOK
    12595: undefined, // KIYEOK-SIOS
    12596: 4354,      // NIEUN
    12597: undefined, // NIEUN-CIEUC
    12598: undefined, // NIEUN-HIEUH
    12599: 4355,      // TIKEUT
    12600: 4356,      // SSANGTIKEUT
    12601: 4357,      // RIEUL
    12602: undefined, // RIEUL-KIYEOK
    12603: undefined, // RIEUL-MIEUM
    12604: undefined, // RIEUL-PIEUP
    12605: undefined, // RIEUL-SIOS
    12606: undefined, // RIEUL-THIEUTH
    12607: undefined, // RIEUL-PHIEUPH
    12608: 4378,      // RIEUL-HIEUH
    12609: 4358,      // MIEUM
    12610: 4359,      // PIEUP
    12611: 4360,      // SSANGPIEUP
    12612: 4385,      // PIEUP-SIOS
    12613: 4361,      // SIOS
    12614: 4362,      // SSANGSIOS
    12615: 4363,      // IEUNG
    12616: 4364,      // CIEUC
    12617: 4365,      // SSANGCIEUC
    12618: 4366,      // CHIEUCH
    12619: 4367,      // KHIEUKH
    12620: 4368,      // THIEUTH
    12621: 4369,      // PHIEUPH
    12622: 4370,      // HIEUH
    12623: undefined, // A
    12624: undefined, // AE
    12625: undefined, // YA
    12626: undefined, // YAE
    12627: undefined, // EO
    12628: undefined, // E
    12629: undefined, // YEO
    12630: undefined, // YE
    12631: undefined, // O
    12632: undefined, // WA
    12633: undefined, // WAE
    12634: undefined, // OE
    12635: undefined, // YO
    12636: undefined, // U
    12637: undefined, // WEO
    12638: undefined, // WE
    12639: undefined, // WI
    12640: undefined, // YU
    12641: undefined, // EU
    12642: undefined, // YI
    12643: undefined, // I
    12644: 4447,      // FILLER
    12645: 4372,      // SSANGNIEUN
    12646: 4373,      // NIEUN-TIKEUT
    12647: undefined, // NIEUN-SIOS
    12648: undefined, // NIEUN-PANSIOS
    12649: undefined, // RIEUL-KIYEOK-SIOS
    12650: undefined, // RIEUL-TIKEUT
    12651: undefined, // RIEUL-PIEUP-SIOS
    12652: undefined, // RIEUL-PANSIOS
    12653: undefined, // RIEUL-YEORINHIEUH
    12654: 4380,      // MIEUM-PIEUP
    12655: undefined, // MIEUM-SIOS
    12656: undefined, // MIEUM-PANSIOS
    12657: 4381,      // KAPYEOUNMIEUM
    12658: 4382,      // PIEUP-KIYEOK
    12659: 4384,      // PIEUP-TIKEUT
    12660: 4386,      // PIEUP-SIOS-KIYEOK
    12661: 4387,      // PIEUP-SIOS-TIKEUT
    12662: 4391,      // PIEUP-CIEUC
    12663: 4393,      // PIEUP-THIEUTH
    12664: 4395,      // KAPYEOUNPIEUP
    12665: 4396,      // KAPYEOUNSSANGPIEUP
    12666: 4397,      // SIOS-KIYEOK
    12667: 4398,      // SIOS-NIEUN
    12668: 4399,      // SIOS-TIKEUT
    12669: 4402,      // SIOS-PIEUP
    12670: 4406,      // SIOS-CIEUC
    12671: 4416,      // PANSIOS
    12672: 4423,      // SSANGIEUNG
    12673: 4428,      // YESIEUNG
    12674: undefined, // YESIEUNG-SIOS
    12675: undefined, // YESIEUNG-PANSIOS
    12676: 4439,      // KAPYEOUNPHIEUPH
    12677: 4440,      // SSANGHIEUH
    12678: 4441,      // YEORINHIEUH
};
var consonant2jongseong = {
    12593: 4520,      // KIYEOK
    12594: 4521,      // SSANGKIYEOK
    12595: 4522,      // KIYEOK-SIOS
    12596: 4523,      // NIEUN
    12597: 4524,      // NIEUN-CIEUC
    12598: 4525,      // NIEUN-HIEUH
    12599: 4526,      // TIKEUT
    12600: undefined, // SSANGTIKEUT
    12601: 4527,      // RIEUL
    12602: 4528,      // RIEUL-KIYEOK
    12603: 4529,      // RIEUL-MIEUM
    12604: 4530,      // RIEUL-PIEUP
    12605: 4531,      // RIEUL-SIOS
    12606: 4532,      // RIEUL-THIEUTH
    12607: 4533,      // RIEUL-PHIEUPH
    12608: 4534,      // RIEUL-HIEUH
    12609: 4535,      // MIEUM
    12610: 4536,      // PIEUP
    12611: undefined, // SSANGPIEUP
    12612: 4537,      // PIEUP-SIOS
    12613: 4538,      // SIOS
    12614: 4539,      // SSANGSIOS
    12615: 4540,      // IEUNG
    12616: 4541,      // CIEUC
    12617: undefined, // SSANGCIEUC
    12618: 4542,      // CHIEUCH
    12619: 4543,      // KHIEUKH
    12620: 4544,      // THIEUTH
    12621: 4545,      // PHIEUPH
    12622: 4546,      // HIEUH
    12623: undefined, // A
    12624: undefined, // AE
    12625: undefined, // YA
    12626: undefined, // YAE
    12627: undefined, // EO
    12628: undefined, // E
    12629: undefined, // YEO
    12630: undefined, // YE
    12631: undefined, // O
    12632: undefined, // WA
    12633: undefined, // WAE
    12634: undefined, // OE
    12635: undefined, // YO
    12636: undefined, // U
    12637: undefined, // WEO
    12638: undefined, // WE
    12639: undefined, // WI
    12640: undefined, // YU
    12641: undefined, // EU
    12642: undefined, // YI
    12643: undefined, // I
    12644: undefined, // FILLER
    12645: undefined, // SSANGNIEUN
    12646: 4550,      // NIEUN-TIKEUT
    12647: 4551,      // NIEUN-SIOS
    12648: 4552,      // NIEUN-PANSIOS
    12649: 4556,      // RIEUL-KIYEOK-SIOS
    12650: 4558,      // RIEUL-TIKEUT
    12651: 4563,      // RIEUL-PIEUP-SIOS
    12652: 4567,      // RIEUL-PANSIOS
    12653: 4569,      // RIEUL-YEORINHIEUH
    12654: 4572,      // MIEUM-PIEUP
    12655: 4573,      // MIEUM-SIOS
    12656: 4575,      // MIEUM-PANSIOS
    12657: 4578,      // KAPYEOUNMIEUM
    12658: undefined, // PIEUP-KIYEOK
    12659: undefined, // PIEUP-TIKEUT
    12660: undefined, // PIEUP-SIOS-KIYEOK
    12661: undefined, // PIEUP-SIOS-TIKEUT
    12662: undefined, // PIEUP-CIEUC
    12663: undefined, // PIEUP-THIEUTH
    12664: 4582,      // KAPYEOUNPIEUP
    12665: undefined, // KAPYEOUNSSANGPIEUP
    12666: 4583,      // SIOS-KIYEOK
    12667: undefined, // SIOS-NIEUN
    12668: 4584,      // SIOS-TIKEUT
    12669: 4586,      // SIOS-PIEUP
    12670: undefined, // SIOS-CIEUC
    12671: 4587,      // PANSIOS
    12672: 4590,      // SSANGIEUNG
    12673: 4592,      // YESIEUNG
    12674: 4593,      // YESIEUNG-SIOS
    12675: 4594,      // YESIEUNG-PANSIOS
    12676: 4596,      // KAPYEOUNPHIEUPH
    12677: undefined, // SSANGHIEUH
    12678: 4601,      // YEORINHIEUH
};

var choseong2consonant = {
    4352: 12593,     // KIYEOK
    4353: 12594,     // SSANGKIYEOK
    4354: 12596,     // NIEUN
    4355: 12599,     // TIKEUT
    4356: 12600,     // SSANGTIKEUT
    4357: 12601,     // RIEUL
    4358: 12609,     // MIEUM
    4359: 12610,     // PIEUP
    4360: 12611,     // SSANGPIEUP
    4361: 12613,     // SIOS
    4362: 12614,     // SSANGSIOS
    4363: 12615,     // IEUNG
    4364: 12616,     // CIEUC
    4365: 12617,     // SSANGCIEUC
    4366: 12618,     // CHIEUCH
    4367: 12619,     // KHIEUKH
    4368: 12620,     // THIEUTH
    4369: 12621,     // PHIEUPH
    4370: 12622,     // HIEUH
    4371: undefined, // NIEUN-KIYEOK
    4372: 12645,     // SSANGNIEUN
    4373: 12646,     // NIEUN-TIKEUT
    4374: undefined, // NIEUN-PIEUP
    4375: undefined, // TIKEUT-KIYEOK
    4376: undefined, // RIEUL-NIEUN
    4377: undefined, // SSANGRIEUL
    4378: 12608,     // RIEUL-HIEUH
    4379: undefined, // KAPYEOUNRIEUL
    4380: 12654,     // MIEUM-PIEUP
    4381: 12657,     // KAPYEOUNMIEUM
    4382: 12658,     // PIEUP-KIYEOK
    4383: undefined, // PIEUP-NIEUN
    4384: 12659,     // PIEUP-TIKEUT
    4385: 12612,     // PIEUP-SIOS
    4386: 12660,     // PIEUP-SIOS-KIYEOK
    4387: 12661,     // PIEUP-SIOS-TIKEUT
    4388: undefined, // PIEUP-SIOS-PIEUP
    4389: undefined, // PIEUP-SSANGSIOS
    4390: undefined, // PIEUP-SIOS-CIEUC
    4391: 12662,     // PIEUP-CIEUC
    4392: undefined, // PIEUP-CHIEUCH
    4393: 12663,     // PIEUP-THIEUTH
    4394: undefined, // PIEUP-PHIEUPH
    4395: 12664,     // KAPYEOUNPIEUP
    4396: 12665,     // KAPYEOUNSSANGPIEUP
    4397: 12666,     // SIOS-KIYEOK
    4398: 12667,     // SIOS-NIEUN
    4399: 12668,     // SIOS-TIKEUT
    4400: undefined, // SIOS-RIEUL
    4401: undefined, // SIOS-MIEUM
    4402: 12669,     // SIOS-PIEUP
    4403: undefined, // SIOS-PIEUP-KIYEOK
    4404: undefined, // SIOS-SSANGSIOS
    4405: undefined, // SIOS-IEUNG
    4406: 12670,     // SIOS-CIEUC
    4407: undefined, // SIOS-CHIEUCH
    4408: undefined, // SIOS-KHIEUKH
    4409: undefined, // SIOS-THIEUTH
    4410: undefined, // SIOS-PHIEUPH
    4411: undefined, // SIOS-HIEUH
    4412: undefined, // CHITUEUMSIOS
    4413: undefined, // CHITUEUMSSANGSIOS
    4414: undefined, // CEONGCHIEUMSIOS
    4415: undefined, // CEONGCHIEUMSSANGSIOS
    4416: 12671,     // PANSIOS
    4417: undefined, // IEUNG-KIYEOK
    4418: undefined, // IEUNG-TIKEUT
    4419: undefined, // IEUNG-MIEUM
    4420: undefined, // IEUNG-PIEUP
    4421: undefined, // IEUNG-SIOS
    4422: undefined, // IEUNG-PANSIOS
    4423: 12672,     // SSANGIEUNG
    4424: undefined, // IEUNG-CIEUC
    4425: undefined, // IEUNG-CHIEUCH
    4426: undefined, // IEUNG-THIEUTH
    4427: undefined, // IEUNG-PHIEUPH
    4428: 12673,     // YESIEUNG
    4429: undefined, // CIEUC-IEUNG
    4430: undefined, // CHITUEUMCIEUC
    4431: undefined, // CHITUEUMSSANGCIEUC
    4432: undefined, // CEONGCHIEUMCIEUC
    4433: undefined, // CEONGCHIEUMSSANGCIEUC
    4434: undefined, // CHIEUCH-KHIEUKH
    4435: undefined, // CHIEUCH-HIEUH
    4436: undefined, // CHITUEUMCHIEUCH
    4437: undefined, // CEONGCHIEUMCHIEUCH
    4438: undefined, // PHIEUPH-PIEUP
    4439: 12676,     // KAPYEOUNPHIEUPH
    4440: 12677,     // SSANGHIEUH
    4441: 12678,     // YEORINHIEUH
    4447: undefined, // FILLER
};
var jongseong2consonant = {
    4520: 12593,     // KIYEOK
    4521: 12594,     // SSANGKIYEOK
    4522: 12595,     // KIYEOK-SIOS
    4523: 12596,     // NIEUN
    4524: 12597,     // NIEUN-CIEUC
    4525: 12598,     // NIEUN-HIEUH
    4526: 12599,     // TIKEUT
    4527: 12601,     // RIEUL
    4528: 12602,     // RIEUL-KIYEOK
    4529: 12603,     // RIEUL-MIEUM
    4530: 12604,     // RIEUL-PIEUP
    4531: 12605,     // RIEUL-SIOS
    4532: 12606,     // RIEUL-THIEUTH
    4533: 12607,     // RIEUL-PHIEUPH
    4534: 12608,     // RIEUL-HIEUH
    4535: 12609,     // MIEUM
    4536: 12610,     // PIEUP
    4537: 12612,     // PIEUP-SIOS
    4538: 12613,     // SIOS
    4539: 12614,     // SSANGSIOS
    4540: 12615,     // IEUNG
    4541: 12616,     // CIEUC
    4542: 12618,     // CHIEUCH
    4543: 12619,     // KHIEUKH
    4544: 12620,     // THIEUTH
    4545: 12621,     // PHIEUPH
    4546: 12622,     // HIEUH
    4547: undefined, // KIYEOK-RIEUL
    4548: undefined, // KIYEOK-SIOS-KIYEOK
    4549: undefined, // NIEUN-KIYEOK
    4550: 12646,     // NIEUN-TIKEUT
    4551: 12647,     // NIEUN-SIOS
    4552: 12648,     // NIEUN-PANSIOS
    4553: undefined, // NIEUN-THIEUTH
    4554: undefined, // TIKEUT-KIYEOK
    4555: undefined, // TIKEUT-RIEUL
    4556: 12649,     // RIEUL-KIYEOK-SIOS
    4557: undefined, // RIEUL-NIEUN
    4558: 12650,     // RIEUL-TIKEUT
    4559: undefined, // RIEUL-TIKEUT-HIEUH
    4560: undefined, // SSANGRIEUL
    4561: undefined, // RIEUL-MIEUM-KIYEOK
    4562: undefined, // RIEUL-MIEUM-SIOS
    4563: 12651,     // RIEUL-PIEUP-SIOS
    4564: undefined, // RIEUL-PIEUP-HIEUH
    4565: undefined, // RIEUL-KAPYEOUNPIEUP
    4566: undefined, // RIEUL-SSANGSIOS
    4567: 12652,     // RIEUL-PANSIOS
    4568: undefined, // RIEUL-KHIEUKH
    4569: 12653,     // RIEUL-YEORINHIEUH
    4570: undefined, // MIEUM-KIYEOK
    4571: undefined, // MIEUM-RIEUL
    4572: 12654,     // MIEUM-PIEUP
    4573: 12655,     // MIEUM-SIOS
    4574: undefined, // MIEUM-SSANGSIOS
    4575: 12656,     // MIEUM-PANSIOS
    4576: undefined, // MIEUM-CHIEUCH
    4577: undefined, // MIEUM-HIEUH
    4578: 12657,     // KAPYEOUNMIEUM
    4579: undefined, // PIEUP-RIEUL
    4580: undefined, // PIEUP-PHIEUPH
    4581: undefined, // PIEUP-HIEUH
    4582: 12664,     // KAPYEOUNPIEUP
    4583: 12666,     // SIOS-KIYEOK
    4584: 12668,     // SIOS-TIKEUT
    4585: undefined, // SIOS-RIEUL
    4586: 12669,     // SIOS-PIEUP
    4587: 12671,     // PANSIOS
    4588: undefined, // IEUNG-KIYEOK
    4589: undefined, // IEUNG-SSANGKIYEOK
    4590: 12672,     // SSANGIEUNG
    4591: undefined, // IEUNG-KHIEUKH
    4592: 12673,     // YESIEUNG
    4593: 12674,     // YESIEUNG-SIOS
    4594: 12675,     // YESIEUNG-PANSIOS
    4595: undefined, // PHIEUPH-PIEUP
    4596: 12676,     // KAPYEOUNPHIEUPH
    4597: undefined, // HIEUH-NIEUN
    4598: undefined, // HIEUH-RIEUL
    4599: undefined, // HIEUH-MIEUM
    4600: undefined, // HIEUH-PIEUP
    4601: 12678,     // YEORINHIEUH
};


var code = {
    isHangul3Choseong : function(c) { return 4352 <= c&&c <= 4447; },
    isHangul3Jungseong: function(c) { return 4448 <= c&&c <= 4514; },
    isHangul3Jongseong: function(c) { return 4520 <= c&&c <= 4601; },

    isHangulDot       : function(c) { return c == 12334 || c == 12335; },
    isHangul2Letter    : function(c) { return 12593 <= c&&c <= 12686; },
    isHangul2Consonant: function(c) { 
        return (12593 <= c&&c <= 12622) || ( 12645 <= c&&c <= 12678);
    },
    isHangul2Vowel    : function(c) { 
        return (12623 <= c&&c <= 12643) || (12679 <= c && c<= 12686); 
    },

    isHangulSyllable : function(c) { return 44032 <= c&&c <= 55203; },

    isHangul: function(c) {
        return (4352 <= c&&c <= 4447 ) || 
                (4448 <= c&&c <= 4514 ) || 
                (4520 <= c&&c <= 4601 ) || 
                (c == 12334 || c == 12335) || 
                (12593 <= c&&c <= 12686 ) ||
                (44032 <= c&&c <= 55203);
    },

    // conversion
    consonantToChoseong: function(cons) {
        if (code.isHangul3Choseong(cons)) {
            return cons;
        }
        if (!code.isHangul2Consonant(cons)) {
            return;
        }
        return consonant2choseong[cons];
    },
    consonantToJongseong: function(cons) {
        if (code.isHangul3Jongseong(cons)) {
            return cons;
        }
        if (!code.isHangul2Consonant(cons)) {
            return;
        }
        return consonant2jongseong[cons];
    },
    choseongToConsonant: function(cho) {
        if (code.isHangul2Consonant(cho)) {
            return cho;
        }
        if (!code.isHangul3Choseong(cho)) {
            return;
        }
        return choseong2consonant[cho];
    },
    jongseongToConsonant: function(jong) {
        if (code.isHangul2Consonant(jong)) {
            return jong;
        }
        if (!code.isHangul3Jongseong(jong)) {
            return;
        }
        return jongseong2consonant[jong];
    },

    // only 21 vowels
    jungseongToVowel: function(jung) {
        if (code.isHangul2Vowel(jung)) {
            return jung;
        }

        if (!code.isHangul3Jungseong(jung) || jung == 4448) {
            return;
        }
        // XXX:
        if (jung >= 4470) {
            return;
        }

        return jung - 4449 + 12623;
    },
    vowelToJungseong: function(vowel) {
        if (code.isHangul3Jungseong(vowel)) {
            return vowel;
        }

        if (!code.isHangul2Vowel(vowel)) {
            return;
        }
        // XXX:
        if (vowel >= 12679) {
            return;
        }

        return vowel - 12623 + 4449;
    },

    // split & merge
    merge3: function(cho,jung,jong) {
        if (!code.isHangul3Choseong(cho)) {
            return;
        }
        if (!code.isHangul3Jungseong(jung)) {
            return;
        }
        if (jong !== undefined && !code.isHangul3Jongseong(jong)) {
            return;
        }

        var ordinal = 0;
        ordinal = (cho - 4352);
        ordinal = (ordinal*21) + jung - 4448 -1;
        ordinal = (ordinal*28);
        if (jong) {
            ordinal += jong - 4520 +1;
        }
        ordinal += 0xAC00;
        
        return ordinal;
    },
    merge: function(cho,jung,jong) {
        if (!(code.isHangul(cho) || code.isHangul(jung))) {
            return;
        }
        if (jong !== undefined && !code.isHangul(jong)) {
            return;
        }

        // cho
        if (code.isHangulSyllable(cho)) {
            cho = code.split(cho)[0];
        }
        if (code.isHangul3Jongseong(cho)) {
            cho = code.jongseongToConsonant(cho);
        }
        if (code.isHangul2Consonant(cho)) {
            cho = code.consonantToChoseong(cho);
        } 
        // jung
        if (code.isHangulSyllable(jung)) {
            jung = code.split(jung)[1];
        }
        if (code.isHangul2Vowel(jung)) {
            jung = code.vowelToJungseong(jung);
        }
        // jong
        if (jong) {
            if (code.isHangulSyllable(jong)) {
                jong = code.split(jong)[2];
            }
            if (code.isHangul3Choseong(jong)) {
                jong = code.choseongToConsonant(jong);
            }
            if (code.isHangul2Consonant(jong)) {
                jong = code.consonantToJongseong(jong);
            }
        }

        return code.merge3(cho,jung,jong);
    },

    // split into 3bul
    split: function(c) {
        if (!code.isHangul(c)) {
            return;
        }

        if (code.isHangulSyllable(c)) {
            var ordinal = c - 0xAC00;
            var jongseong = ordinal % 28;
            ordinal = (ordinal-jongseong)/28;
            var jungseong = ordinal % 21;
            ordinal = (ordinal-jungseong)/21;
            var choseong = ordinal % 21;
            return [
                (4352+choseong), 
                (4448+1+jungseong),
                jongseong === 0 ? undefined : (4520-1+jongseong)
            ];
        } 
        // 2
        else if (code.isHangul2Vowel(c)) {
            return [undefined, code.vowelToJungseong(c), undefined];
        } else if (code.isHangul2Consonant(c)) {
            return [code.consonantToChoseong(c), undefined, undefined];
        }
        // 3
        else if (code.isHangul3Choseong(c)) {
            return [c, undefined, undefined];
        }
        else if (code.isHangul3Jungseong(c)) {
            return [undefined, c, undefined];
        }
        else if (code.isHangul3Jongseong(c)) {
            return [undefined, undefined, c];
        }
    },

    hasJongseong: function(c) {
        if (!code.isHangulSyllable(c)) {
            return;
        }

        return code.split(c)[2] !== undefined;
    }
};


//
// letter
//

// convert code c to string
function chr(c, defaultVal) {
    return c === undefined ? defaultVal : String.fromCharCode(c);
}
// string to code
function ord(letter) {
    if (letter !== undefined && letter !== '')
        return letter.charCodeAt(0);
}

letter = {};
// test
letter.isHangul3Choseong  = function(letter) { return code.isHangul3Choseong(ord(letter)); };
letter.isHangul3Jungseong = function(letter) { return code.isHangul3Jungseong(ord(letter)); };
letter.isHangul3Jongseong = function(letter) { return code.isHangul3Jongseong(ord(letter)); };
letter.isHangulDot       = function(letter) { return code.isHangulDot(ord(letter)); };
letter.isHangul2Letter    = function(letter) { return code.isHangul2Letter(ord(letter)); };
letter.isHangul2Consonant= function(letter) { return code.isHangul2Consonant(ord(letter)); },
letter.isHangul2Vowel    = function(letter) { return code.isHangul2Vowel(ord(letter)); },
letter.isHangulSyllable  = function(letter) { return code.isHangulSyllable(ord(letter)); };
letter.isHangul          = function(letter) { return code.isHangul(ord(letter)); };

letter.hasJongseong = function(letter) {
    return code.hasJongseong(ord(letter));
};

// convert
letter.consonantToChoseong  = function(cons)  { return chr(code.consonantToChoseong(ord(cons))); };
letter.consonantToJongseong = function(cons)  { return chr(code.consonantToJongseong(ord(cons))); };
letter.vowelToJungseong     = function(vowel) { return chr(code.vowelToJungseong(ord(vowel))); };
letter.choseongToConsonant  = function(cho)   { return chr(code.choseongToConsonant(ord(cho))); };
letter.jongseongToConsonant = function(jong)  { return chr(code.jongseongToConsonant(ord(jong))); };
letter.jungseongToVowel     = function(jung)  { return chr(code.jungseongToVowel(ord(jung))); };

// merge & split
letter.merge3 = function(cho,jung,jong) { return chr(code.merge3(ord(cho),ord(jung),ord(jong)));};
letter.merge  = function(cho,jung,jong) { return chr(code.merge(ord(cho),ord(jung),ord(jong)));};
letter.split  = function(letter) {
    var splits = code.split(ord(letter));
    return [chr(splits[0], ""), chr(splits[1], ""), chr(splits[2], "")];
};

//
letter.attachIfHangul = function(word, suffix) {
    if (word === '') {
        return suffix;
    }
    var tail = word[word.length-1];

    // just paste two string if not hangul
    if (!letter.isHangul(tail) || !letter.isHangul(suffix[0])) {
        return word + suffix;
    }

    if (tail === suffix[0]) {
        // choseong(3) + choseong(3)
        if (letter.isHangul3Choseong(tail) && ssangChoseong[ord(tail)]) {
            return word.substring(0,word.length-1) + chr(ssangChoseong[ord(tail)]);
        }
        // jongseong(3) + jongseong(3)
        else if (letter.isHangul3Jongseong(tail) && ssangJongseong[ord(tail)]) {
            return word.substring(0,word.length-1) + chr(ssangJongseong[ord(tail)]);
        }
    }
    // jungseong(3) + jungseong(3)
    if (letter.isHangul3Jungseong(tail) && letter.isHangul3Jungseong(suffix[0])) {
        var double = (doubleJungseongMap[ord(tail)] || {})[ord(suffix[0])];
        if (double) {
            return word.substring(0,word.length-1) + chr(double);
        }
    }

    // choseong(3) + jungseong(3)
    if (letter.isHangul3Choseong(tail) && letter.isHangul3Jungseong(suffix[0])) {
        return word.substring(0,word.length-1) + letter.merge(tail, suffix[0]);
    }
    // reverse: jungseong(3) + choseong(3)
    else if (letter.isHangul3Choseong(suffix[0]) && letter.isHangul3Jungseong(tail)) {
        return word.substring(0,word.length-1) + letter.merge(suffix[0], tail);
    }
    // consonant + vowel(2)
    else if (letter.isHangul2Consonant(tail) && letter.isHangul2Vowel(suffix[0])) {
        return word.substring(0,word.length-1) + letter.merge(tail, suffix[0]);
    } 
    // jongsongless syllable
    else if (letter.isHangulSyllable(tail) && !letter.hasJongseong(tail)) {
        // ... + jungseong(3)
        if (letter.isHangul3Jungseong(suffix[0])) {
            var splits = letter.split(tail);
            var lastJungseong = splits[1];
            var double = (doubleJungseongMap[ord(lastJungseong)] || {})[ord(suffix[0])];
            if (double) {
                var prevSyllable = letter.merge(splits[0], chr(double));
                return word.substring(0,word.length-1) + prevSyllable;
            }
        }
        // ... + jongseong(3)
        else if (letter.isHangul3Jongseong(suffix[0])) {
            return word.substring(0,word.length-1) + letter.merge(tail, tail, suffix[0]);
        }
        // ... + consonant(2)
        else if (letter.isHangul2Consonant(suffix[0])) {
            return word.substring(0,word.length-1) + letter.merge(tail, tail, suffix[0]);
        } 
    }
    // jongsongful syllable + vowel(2)
    else if (letter.isHangulSyllable(tail) && letter.hasJongseong(tail) && letter.isHangul2Vowel(suffix[0])) {
        var splits = letter.split(tail);
        var prevSyllable = letter.merge(splits[0], splits[1]);
        return word.substring(0,word.length-1) + prevSyllable + letter.merge(splits[2], suffix[0]);
    } 
    
    //
    return word + suffix;
};


// exports
if (typeof exports == "undefined") {
    exports = window.hangul = {};
}

exports.code = code;

exports.ord = ord;
exports.chr = chr;

exports.isHangul3Choseong    = letter.isHangul3Choseong;
exports.isHangul3Jungseong   = letter.isHangul3Jungseong;
exports.isHangul3Jongseong   = letter.isHangul3Jongseong;
exports.isHangulDot          = letter.isHangulDot;
exports.isHangul2Letter       = letter.isHangul2Letter;
exports.isHangul2Consonant   = letter.isHangul2Consonant;
exports.isHangul2Vowel       = letter.isHangul2Vowel;
exports.isHangulSyllable     = letter.isHangulSyllable;
exports.isHangul             = letter.isHangul;
exports.hasJongseong         = letter.hasJongseong;

exports.consonantToChoseong  = letter.consonantToChoseong;
exports.consonantToJongseong = letter.consonantToJongseong;
exports.vowelToJungseong     = letter.vowelToJungseong;
exports.choseongToConsonant  = letter.choseongToConsonant;
exports.jongseongToConsonant = letter.jongseongToConsonant;
exports.jungseongToVowel     = letter.jungseongToVowel;

exports.merge3               = letter.merge3;
exports.merge                = letter.merge;
exports.split                = letter.split;

exports.attachIfHangul       = letter.attachIfHangul;
